{"version":3,"file":"index-Bl4itN-X.js","sources":["../../../../../kraftvaerk.umbraco.blockfilter.Frontend/src/blockfilter-api/core/OpenAPI.ts","../../../../../kraftvaerk.umbraco.blockfilter.Frontend/src/index.ts"],"sourcesContent":["/* generated using openapi-typescript-codegen -- do not edit */\n/* istanbul ignore file */\n/* tslint:disable */\n/* eslint-disable */\nimport type { ApiRequestOptions } from './ApiRequestOptions';\n\ntype Resolver<T> = (options: ApiRequestOptions) => Promise<T>;\ntype Headers = Record<string, string>;\n\nexport type OpenAPIConfig = {\n    BASE: string;\n    VERSION: string;\n    WITH_CREDENTIALS: boolean;\n    CREDENTIALS: 'include' | 'omit' | 'same-origin';\n    TOKEN?: string | Resolver<string> | undefined;\n    USERNAME?: string | Resolver<string> | undefined;\n    PASSWORD?: string | Resolver<string> | undefined;\n    HEADERS?: Headers | Resolver<Headers> | undefined;\n    ENCODE_PATH?: ((path: string) => string) | undefined;\n};\n\nexport const OpenAPI: OpenAPIConfig = {\n    BASE: '',\n    VERSION: '1.0',\n    WITH_CREDENTIALS: false,\n    CREDENTIALS: 'include',\n    TOKEN: undefined,\n    USERNAME: undefined,\n    PASSWORD: undefined,\n    HEADERS: undefined,\n    ENCODE_PATH: undefined,\n};\r\n","\r\nimport { ManifestBase, UmbConditionConfigBase, UmbEntryPointOnInit, UmbExtensionRegistry } from '@umbraco-cms/backoffice/extension-api';\r\n\r\n\r\nimport { UMB_AUTH_CONTEXT } from '@umbraco-cms/backoffice/auth';\r\nimport { ManifestModal } from '@umbraco-cms/backoffice/modal';\r\nimport { OpenAPI } from './blockfilter-api/index.ts';\r\n\r\nconst manifests: ManifestModal[] = [\r\n  {\r\n    type: 'modal',\r\n    // This alias is the key. Weâ€™re overriding the core catalogue by reusing its alias.\r\n    // If the alias ever changes upstream, update this to match.\r\n    alias: 'Umb.Modal.BlockCatalogue',\r\n    \r\n    name: 'Custom Block Catalogue Modal',\r\n    // Your custom element tag name:\r\n    elementName: 'custom-umb-block-catalogue',\r\n    // Lazy-load the element class:\r\n    js: () => import('./elements/UmbBlockCatalogueModalElement.ts'),\r\n    // Make sure we win registration ordering if both exist:\r\n    weight: -10000,\r\n    \r\n  },\r\n];\r\n\r\nexport const onInit: UmbEntryPointOnInit = async (_host, extensionRegistry) => {\r\n  _host.consumeContext(UMB_AUTH_CONTEXT, async (authContext) => {\r\n    const token = await authContext?.getLatestToken() ?? '';\r\n    const base = authContext?.getServerUrl() ?? '';\r\n\r\n    OpenAPI.BASE = base;\r\n    OpenAPI.TOKEN = token;\r\n   //extensionRegistry.registerMany(manifests);\r\n   \r\n   removeAndRegister(extensionRegistry);\r\n  });\r\n};\r\n\r\n  \r\nfunction removeAndRegister(extensionRegistry : UmbExtensionRegistry<ManifestBase, UmbConditionConfigBase<string>, ManifestBase>) {\r\n  setTimeout(() => {\r\n    const all = extensionRegistry.getAllExtensions();\r\n    const found = all.find(x => x.alias === 'Umb.Modal.BlockCatalogue');\r\n    \r\n    if(!found) {\r\n      removeAndRegister(extensionRegistry);\r\n    }\r\n    else {\r\n      extensionRegistry.unregister(found.alias);\r\n      extensionRegistry.registerMany(manifests);\r\n    }\r\n  }, 200);\r\n}"],"names":["OpenAPI","manifests","onInit","_host","extensionRegistry","UMB_AUTH_CONTEXT","authContext","token","base","removeAndRegister","found","x"],"mappings":";AAqBO,MAAMA,IAAyB;AAAA,EAClC,MAAM;AAAA,EACN,SAAS;AAAA,EACT,kBAAkB;AAAA,EAClB,aAAa;AAAA,EACb,OAAO;AAAA,EACP,UAAU;AAAA,EACV,UAAU;AAAA,EACV,SAAS;AAAA,EACT,aAAa;AACjB,GCvBMC,IAA6B;AAAA,EACjC;AAAA,IACE,MAAM;AAAA;AAAA;AAAA,IAGN,OAAO;AAAA,IAEP,MAAM;AAAA;AAAA,IAEN,aAAa;AAAA;AAAA,IAEb,IAAI,MAAM,OAAO,6CAA6C;AAAA;AAAA,IAE9D,QAAQ;AAAA,EAEV;AACF,GAEaC,IAA8B,OAAOC,GAAOC,MAAsB;AACvE,EAAAD,EAAA,eAAeE,GAAkB,OAAOC,MAAgB;AAC5D,UAAMC,IAAQ,OAAMD,KAAA,gBAAAA,EAAa,qBAAoB,IAC/CE,KAAOF,KAAA,gBAAAA,EAAa,mBAAkB;AAE5C,IAAAN,EAAQ,OAAOQ,GACfR,EAAQ,QAAQO,GAGjBE,EAAkBL,CAAiB;AAAA,EAAA,CACnC;AACH;AAGA,SAASK,EAAkBL,GAAsG;AAC/H,aAAW,MAAM;AAEf,UAAMM,IADMN,EAAkB,mBACZ,KAAK,CAAKO,MAAAA,EAAE,UAAU,0BAA0B;AAElE,IAAID,KAIgBN,EAAA,WAAWM,EAAM,KAAK,GACxCN,EAAkB,aAAaH,CAAS,KAJxCQ,EAAkBL,CAAiB;AAAA,KAMpC,GAAG;AACR;"}
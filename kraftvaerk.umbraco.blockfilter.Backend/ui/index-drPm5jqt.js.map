{"version":3,"file":"index-drPm5jqt.js","sources":["../../kraftvaerk.umbraco.blockfilter.Frontend/src/blockfilter-api/core/OpenAPI.ts","../../kraftvaerk.umbraco.blockfilter.Frontend/src/index.ts"],"sourcesContent":["/* generated using openapi-typescript-codegen -- do not edit */\n/* istanbul ignore file */\n/* tslint:disable */\n/* eslint-disable */\nimport type { ApiRequestOptions } from './ApiRequestOptions';\n\ntype Resolver<T> = (options: ApiRequestOptions) => Promise<T>;\ntype Headers = Record<string, string>;\n\nexport type OpenAPIConfig = {\n    BASE: string;\n    VERSION: string;\n    WITH_CREDENTIALS: boolean;\n    CREDENTIALS: 'include' | 'omit' | 'same-origin';\n    TOKEN?: string | Resolver<string> | undefined;\n    USERNAME?: string | Resolver<string> | undefined;\n    PASSWORD?: string | Resolver<string> | undefined;\n    HEADERS?: Headers | Resolver<Headers> | undefined;\n    ENCODE_PATH?: ((path: string) => string) | undefined;\n};\n\nexport const OpenAPI: OpenAPIConfig = {\n    BASE: '',\n    VERSION: '1.0',\n    WITH_CREDENTIALS: false,\n    CREDENTIALS: 'include',\n    TOKEN: undefined,\n    USERNAME: undefined,\n    PASSWORD: undefined,\n    HEADERS: undefined,\n    ENCODE_PATH: undefined,\n};\r\n","\r\nimport { ManifestBase, UmbConditionConfigBase, UmbEntryPointOnInit, UmbExtensionRegistry } from '@umbraco-cms/backoffice/extension-api';\r\n\r\n\r\nimport { UMB_AUTH_CONTEXT } from '@umbraco-cms/backoffice/auth';\r\nimport { ManifestModal } from '@umbraco-cms/backoffice/modal';\r\nimport { OpenAPI } from './blockfilter-api/index.ts';\r\n\r\nconst modalAlias = 'Umb.Modal.BlockCatalogue';\r\nconst manifests: ManifestModal[] = [\r\n  {\r\n    type: 'modal',\r\n    // This alias is the key. We're overriding the core catalogue by reusing its alias.\r\n    // If the alias ever changes upstream, update this to match.\r\n    alias: modalAlias,\r\n\r\n    name: 'Block Catalogue Modal Extension',\r\n    elementName: 'umb-block-catalogue-modal-extend',\r\n    js: () => import('./elements/UmbBlockCatalogueModalElementExtension.ts'),\r\n    // Make sure we win registration ordering if both exist:\r\n    weight: -10000,\r\n    \r\n  },\r\n];\r\n\r\nexport const onInit: UmbEntryPointOnInit = async (_host, extensionRegistry) => {\r\n  _host.consumeContext(UMB_AUTH_CONTEXT, async (authContext) => {\r\n    const token = await authContext?.getLatestToken() ?? '';\r\n    const base = authContext?.getServerUrl() ?? '';\r\n\r\n    OpenAPI.BASE = base;\r\n    OpenAPI.TOKEN = token;\r\n    \r\n    // Umbraco doesn't provide a \"overwrites\" for modals\r\n    // lets overwrite it anyway\r\n    removeAndRegister(extensionRegistry);\r\n  });\r\n};\r\n\r\n  \r\nfunction removeAndRegister(extensionRegistry : UmbExtensionRegistry<ManifestBase, UmbConditionConfigBase<string>, ManifestBase>) {\r\n  setTimeout(() => {\r\n    const blockCatalogueExtension = extensionRegistry.getByAlias(modalAlias);\r\n\r\n    if(!blockCatalogueExtension) {\r\n      removeAndRegister(extensionRegistry);\r\n    }\r\n    else {\r\n      extensionRegistry.unregister(blockCatalogueExtension.alias);\r\n      extensionRegistry.registerMany(manifests);\r\n    }\r\n  }, 200);\r\n}"],"names":["OpenAPI","modalAlias","manifests","onInit","_host","extensionRegistry","UMB_AUTH_CONTEXT","authContext","token","base","removeAndRegister","blockCatalogueExtension"],"mappings":";AAqBO,MAAMA,IAAyB;AAAA,EAClC,MAAM;AAAA,EACN,SAAS;AAAA,EACT,kBAAkB;AAAA,EAClB,aAAa;AAAA,EACb,OAAO;AAAA,EACP,UAAU;AAAA,EACV,UAAU;AAAA,EACV,SAAS;AAAA,EACT,aAAa;AACjB,GCvBMC,IAAa,4BACbC,IAA6B;AAAA,EACjC;AAAA,IACE,MAAM;AAAA;AAAA;AAAA,IAGN,OAAOD;AAAA,IAEP,MAAM;AAAA,IACN,aAAa;AAAA,IACb,IAAI,MAAM,OAAO,sDAAsD;AAAA;AAAA,IAEvE,QAAQ;AAAA,EAEV;AACF,GAEaE,IAA8B,OAAOC,GAAOC,MAAsB;AACvE,EAAAD,EAAA,eAAeE,GAAkB,OAAOC,MAAgB;AAC5D,UAAMC,IAAQ,OAAMD,KAAA,gBAAAA,EAAa,qBAAoB,IAC/CE,KAAOF,KAAA,gBAAAA,EAAa,mBAAkB;AAE5C,IAAAP,EAAQ,OAAOS,GACfT,EAAQ,QAAQQ,GAIhBE,EAAkBL,CAAiB;AAAA,EAAA,CACpC;AACH;AAGA,SAASK,EAAkBL,GAAsG;AAC/H,aAAW,MAAM;AACT,UAAAM,IAA0BN,EAAkB,WAAWJ,CAAU;AAEvE,IAAIU,KAIgBN,EAAA,WAAWM,EAAwB,KAAK,GAC1DN,EAAkB,aAAaH,CAAS,KAJxCQ,EAAkBL,CAAiB;AAAA,KAMpC,GAAG;AACR;"}